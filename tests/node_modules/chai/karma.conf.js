module.exports = function(config) {
   config.set({
      frameworks: [ 'mocha' ]
      , files: [
         'build/build.js'
         , 'test/bootstrap/karma.js'
         , 'test/*.js'
      ]
      , reporters: [ 'progress' ]
      , colors: true
      , logLevel: config.LOG_INFO
      , autoWatch: false
      , browsers: [ 'Chrome', 'Firefox', 'PhantomJS', 'ChromeCanary' ]
      , customLaunchers: {
         Chrome_travis_ci: {
            base: 'Chrome',
            flags: ['--no-sandbox']
         }
      }
      , browserDisconnectTimeout: 10000
      , browserDisconnectTolerance: 2
      , browserNoActivityTimeout: 20000
      , singleRun: true


   });

   if(process.env.TRAVIS){
      config.browsers = ['Chrome_travis_ci'];
   }

   switch (process.env.CHAI_TEST_ENV) {
      case 'sauce':
         require('./karma.sauce')(config);
         break;
         default:
            // ...
            break;
   };
};
